{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "_id": "push_notification_subscriptions",
    "description": "Schema for push notification subscriptions",
    "properties": {
        "app_name": {
            "description": "The identifier for the app that will be sending push notifications",
            "type": "string"
        },
        "mobile_device_id": {
            "description": "An identifier provided by the mobile device",
            "type": "string"
        },
        "notification_registration_ids": {
            "additionalProperties": {
                "description": "Each property key is the registration id for the mobile device",
                "properties": {
                    "notification_preferences": {
                        "default": [
                            "chat",
                            "incoming_call",
                            "new_voicemail"
                        ],
                        "description": "The types of notifications that the user wants to receive. The values must be unique amongst all notification registration ids in the subscription",
                        "items": {
                            "enum": [
                                "chat",
                                "incoming_call",
                                "new_unowned_voicemail",
                                "new_voicemail"
                            ],
                            "type": "string"
                        },
                        "type": "array"
                    },
                    "notification_type": {
                        "description": "The type of notification service to use",
                        "enum": [
                            "apns",
                            "fcm"
                        ],
                        "type": "string"
                    }
                },
                "required": [
                    "notification_preferences",
                    "notification_type"
                ],
                "type": "object"
            },
            "description": "Notification configuration per push notification registration id",
            "type": "object"
        },
        "platform": {
            "description": "The platform that the push notification subscriptions are for",
            "enum": [
                "android",
                "ios"
            ],
            "type": "string"
        },
        "sip_proxy_server": {
            "description": "The hostname or IP address of the SIP registrar the app will register to upon waking from a push notification",
            "type": "string"
        }
    },
    "required": [
        "app_name",
        "mobile_device_id",
        "notification_registration_ids",
        "platform",
        "sip_proxy_server"
    ],
    "type": "object"
}
