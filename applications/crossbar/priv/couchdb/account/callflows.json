{
    "_id": "_design/callflows",
    "filters": {
        "export": "function(doc, req) { return ( doc.pvt_type == 'callflow' ); }"
    },
    "language": "javascript",
    "views": {
        "crossbar_listing": {
            "map": "function(doc) { if (doc.pvt_type != 'callflow' || doc.pvt_deleted) return; var featurecode = (!doc.featurecode) ? false : doc.featurecode; var ringback_timeout = featurecode ? doc.flow.data.ringback_timeout : false; emit(doc._id, {'id': doc._id, 'name': doc.name, 'type': doc.type, 'numbers': doc.numbers, 'patterns': doc.patterns, 'featurecode': featurecode, 'ringback_timeout': ringback_timeout, 'owner_id': doc.owner_id, 'group_id': doc.group_id, 'user_id': doc.flow.data.id}); }"
        },
        "queue_callflows": {
            "map": "function(doc) { if (doc.pvt_type != 'callflow' || doc.pvt_deleted) return; if(doc.flow.module != 'acdc_member') return; emit(doc.flow.data.id, doc.numbers); }"
        }
    }
}
